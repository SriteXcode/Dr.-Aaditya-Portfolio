import{r,j as t}from"./index-C9jSAw2v.js";import{A as n}from"./Api-fKIFaZMz.js";import{c as k}from"./createLucideIcon-CXq6it9s.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],M=k("plus",q);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Y=k("square-pen",B);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],H=k("trash-2",z),U=()=>{const[i,c]=r.useState({books:[],research_projects:[]}),[A,l]=r.useState(!1),[h,x]=r.useState("books"),[d,w]=r.useState(null),[p,m]=r.useState(""),[C,g]=r.useState(""),[_,b]=r.useState(""),[S,j]=r.useState(""),[F,y]=r.useState(""),[I,v]=r.useState(""),[P,N]=r.useState(""),[$,f]=r.useState("");r.useEffect(()=>{(async()=>{try{const[s,a]=await Promise.all([n.get("/books"),n.get("/research_projects")]);c(o=>({...o,books:s.data||[],research_projects:a.data||[]}))}catch(s){console.error("Error fetching data:",s),alert("Failed to fetch academic data.")}})()},[c]),console.log("books:",i.books),console.log("research_projects:",i.research_projects);const u=()=>{m(""),g(""),b(""),j(""),y(""),v(""),N(""),f(""),w(null)},D=async e=>{if(!p)return alert("Title is required");const s={title:p,category:C,description:_,publishedYear:S,publisher:F,journal:I,impactFactor:P,indexed:$,image:"/api/placeholder/300/400",document:`/documents/${p.toLowerCase().replace(/\s+/g,"-")}.pdf`};try{if(d){const a=await n.put(`/${e}/${d}`,s);c(o=>({...o,[e]:o[e].map(E=>E.id===d?a.data:E)}))}else{const a=await n.post(`/${e}`,s);c(o=>({...o,[e]:[a.data,...o[e]]}))}u(),l(!1)}catch(a){console.error("Error saving item:",a),alert("Failed to save item. Check console for details.")}},R=async(e,s)=>{if(confirm("Delete this item?"))try{await n.delete(`/${e}/${s}`),c(a=>({...a,[e]:a[e].filter(o=>(o.id||o._id)!==s)}))}catch(a){console.error("Error deleting item:",a),alert("Failed to delete item.")}},T=(e,s)=>{l(!0),x(e),w(s.id||s._id),m(s.title||""),g(s.category||""),b(s.description||""),j(s.publishedYear||""),y(s.publisher||""),v(s.journal||""),N(s.impactFactor||""),f(s.indexed||"")};return t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Manage Academic Content"}),t.jsxs("div",{className:"mb-8 flex space-x-4",children:[t.jsxs("button",{onClick:()=>{l(!0),x("books"),u()},className:"bg-blue-600 text-white px-4 py-2 rounded flex items-center hover:bg-blue-700 transition-colors",children:[t.jsx(M,{className:"w-4 h-4 mr-2"})," Add Book"]}),t.jsxs("button",{onClick:()=>{l(!0),x("research_projects"),u()},className:"bg-purple-600 text-white px-4 py-2 rounded flex items-center hover:bg-purple-700 transition-colors",children:[t.jsx(M,{className:"w-4 h-4 mr-2"})," Add Research Paper"]})]}),A&&t.jsxs("form",{onSubmit:e=>{e.preventDefault(),D(h)},className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[t.jsx("h3",{className:"text-xl font-bold mb-4",children:d?`Edit ${h==="books"?"Book":"Research_Projects"}`:`Add New ${h==="books"?"Book":"Research_Projects"}`}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",placeholder:"Title",value:p,onChange:e=>m(e.target.value),className:"px-3 py-2 border rounded",required:!0}),t.jsx("input",{type:"text",placeholder:"Category",value:C,onChange:e=>g(e.target.value),className:"px-3 py-2 border rounded",required:!0}),t.jsx("textarea",{placeholder:"Description",value:_,onChange:e=>b(e.target.value),className:"px-3 py-2 border rounded col-span-2"}),t.jsx("input",{type:"text",placeholder:"Published Year",value:S,onChange:e=>j(e.target.value),className:"px-3 py-2 border rounded"}),h==="books"?t.jsx("input",{type:"text",placeholder:"Publisher",value:F,onChange:e=>y(e.target.value),className:"px-3 py-2 border rounded"}):t.jsxs(t.Fragment,{children:[t.jsx("input",{type:"text",placeholder:"Journal",value:I,onChange:e=>v(e.target.value),className:"px-3 py-2 border rounded"}),t.jsx("input",{type:"text",placeholder:"Impact Factor",value:P,onChange:e=>N(e.target.value),className:"px-3 py-2 border rounded"}),t.jsx("input",{type:"text",placeholder:"Indexed (e.g., SCIE, Scopus)",value:$,onChange:e=>f(e.target.value),className:"px-3 py-2 border rounded"})]})]}),t.jsxs("div",{className:"mt-4 flex space-x-2",children:[t.jsx("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors",children:d?"Update Item":"Add Item"}),t.jsx("button",{type:"button",onClick:()=>{l(!1),u()},className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:["books","research_projects"].map(e=>t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-xl font-bold capitalize",children:e==="research_projects"?"Research Papers":"Books"}),i[e].length===0&&t.jsx("div",{className:"text-gray-500",children:"No items"}),i[e].map((s,a)=>t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[t.jsx("h4",{className:"font-semibold",children:s.title}),t.jsx("p",{className:"text-sm text-gray-600",children:s.category}),s.impactFactor&&t.jsxs("p",{className:"text-xs text-green-600",children:["Impact Factor: ",s.impactFactor]}),t.jsxs("div",{className:"flex space-x-2 mt-2",children:[t.jsxs("button",{onClick:()=>T(e,s),className:"bg-yellow-500 text-white px-2 py-1 rounded text-xs hover:bg-yellow-600 transition-colors flex items-center",children:[t.jsx(Y,{className:"w-3 h-3 mr-1"})," Edit"]}),t.jsx("button",{onClick:()=>R(e,s.id||s._id),className:"bg-red-500 text-white px-2 py-1 rounded text-xs hover:bg-red-600 transition-colors flex items-center",children:t.jsx(H,{className:"w-3 h-3"})})]})]},s.id||s._id||`${e}-${a}`))]},e))})]})};export{U as default};
