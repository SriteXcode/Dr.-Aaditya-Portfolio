import{r as a,j as e,L as g}from"./index-_AwIy4Wk.js";import{A as c}from"./Api-fKIFaZMz.js";const y=()=>{const[n,r]=a.useState([]),[d,o]=a.useState(!0),[x,m]=a.useState(null);a.useEffect(()=>{(async()=>{try{const s=await c.get("/messages");r(s.data)}catch(s){m(s)}finally{o(!1)}})()},[]);const h=async t=>{try{const s=await c.put(`/messages/${t}`,{read:!0});r(l=>l.map(i=>i._id===t?s.data:i))}catch(s){console.error("❌ Error marking read:",s.message)}},u=async t=>{try{await c.delete(`/messages/${t}`),r(s=>s.filter(l=>l._id!==t))}catch(s){console.error("❌ Error deleting:",s.message)}};return d?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(g,{})}):x?e.jsx("div",{className:"flex justify-center items-center h-64 text-red-500 text-lg",children:"Error loading messages."}):e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Academic Inquiries & Messages"}),e.jsxs("div",{className:"space-y-4",children:[n.length===0&&e.jsx("div",{className:"text-gray-500 text-center py-8",children:"No messages yet."}),n.map(t=>e.jsx("div",{className:`bg-white p-6 rounded-lg shadow-md ${t.read?"":"border-l-4 border-blue-500"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.name}),e.jsx("p",{className:"text-blue-600",children:t.email}),e.jsx("p",{className:"text-gray-600 mt-2",children:t.message}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:new Date(t.createdAt).toLocaleString()})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[!t.read&&e.jsx("button",{onClick:()=>h(t._id),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors",children:"Mark Read"}),e.jsx("button",{onClick:()=>u(t._id),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors",children:"Delete"})]})]})},t._id))]})]})};export{y as default};
